// qrcode.min.js
// A library for generating and displaying QR code
// Developed by QQApp Inc.

// A function for creating a QR code element
function createQRCode(text, width, height, colorDark, colorLight) {
    var qrcode = new QRCode(document.getElementById("qrcode"), { // Create a QRCode object
        text: text, // The text to encode
        width: width, // The width of the QR code
        height: height, // The height of the QR code
        colorDark: colorDark, // The color of the dark module
        colorLight: colorLight // The color of the light module
    });
    return qrcode; // Return the QRCode object
}

// A function for displaying a QR code element
function displayQRCode(qrcode) {
    var qrcodeElement = document.getElementById("qrcode"); // Get the QR code element
    qrcodeElement.style.display = "block"; // Set the display style to block
    qrcodeElement.style.margin = "auto"; // Set the margin style to auto
    qrcodeElement.style.border = "1px solid black"; // Set the border style to 1px solid black
}

// A function for getting the appid from the URL
function getAppIdFromUrl() {
    var url = window.location.href; // Get the current URL
    var params = url.split('?')[1]; // Get the parameters part
    var pairs = params.split('&'); // Split the parameters by &
    for (var i = 0; i < pairs.length; i++) {
        var pair = pairs[i].split('='); // Split the parameter by =
        if (pair[0] == 'appid') { // If the parameter name is appid
            return pair[1]; // Return the parameter value
        }
    }
    return null; // If no appid found, return null
}

// A function for getting the QR code text from the appid
function getQRCodeText(appid) {
    var text = 'https://v.zzsp.eu.org/douyin/download.php?appid=' + appid; // The text to encode, use your own domain name
    return text; // Return the text
}

// A function for initializing the QR code
function initQRCode() {
    var appid = getAppIdFromUrl(); // Get the appid from the URL
    if (appid) { // If appid exists
        var text = getQRCodeText(appid); // Get the QR code text from the appid
        var qrcode = createQRCode(text, 200, 200, '#000000', '#ffffff'); // Create a QR code element with the text and some options
        displayQRCode(qrcode); // Display the QR code element
    }
}

// Call the initQRCode function when the window is loaded
window.onload = initQRCode;
